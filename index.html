<!doctype html>

<html lang="en">

<head>

    <meta charset="utf-8">

    <title>Test page</title>
    <meta name="description" content="Testing some rubbish">
    <meta name="author" content="SitePoint">

    <link rel="stylesheet" href="css/sheet.css">

    <script type="text/javascript" >
        //var mydata = [{"foo" : "text", "bar" : 30}, {"foo" : "else", "bar" : 21}];

        var mydata = [{"name": "The Master and Margarita", "author": "Mikhail Bulgakov", "genre": "russian", "date": 2019, "review" : "Took a while, classic."}];
        //Cryptonomicon : Neal Stephenson : scifi : 2018 : Difficult to put down, Yamamoto features.
        //A Canticle for Leibowitz :  : scifi :  : Lots of Latin, often difficult to parse, quite engrossing. Final section perhaps a little less polished than the first two.

        
        function generateTableHead(table, headers) {
            let thead = table.createTHead();
            let row = thead.insertRow();

            // Populate the header row
            for (let c of headers) {
                let th = document.createElement("th");
                let text = document.createTextNode(c);
                th.appendChild(text);
                row.appendChild(th);
            }

        }
        
        function generateTable(table, data) {
            for (let element of data) {
                let row = table.insertRow();
                for (key in element) {
                    let cell = row.insertCell();
                    let text = document.createTextNode(element[key]);
                    cell.appendChild(text);
                }
            }
        }
        
        function getPage() {
            const urlParams = new URLSearchParams(window.location.search);
            const page = urlParams.get('page');
        }

        function load() {
            //alert(mydata.length);

            let table = document.getElementById('mainTable');
            

            generateTable(table, mydata)
            generateTableHead(table, Object.keys(mydata[0]))
            getPage();
        }
    </script>


</head>

<body onload = "load()">

    <div class = "nav">
        <a href = ?page=home>Home</a>
        <a href = ?page=books>Books</a>
        <a href = ?page=films>Films</a>
        <a href = ?page=programmes>Programmes</a>
        <a href = ?page=notes>Notes</a>
    </div>
    
    
    <table id = "mainTable">
        
    </table>

</body>

</html>
